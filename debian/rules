#!/usr/bin/make -f

%:
	dh $@

override_dh_auto_build:
	# Compile translation files
	msgfmt po/en.po -o locale/en/LC_MESSAGES/samba-configurator.mo
	msgfmt po/it.po -o locale/it/LC_MESSAGES/samba-configurator.mo
	msgfmt po/es.po -o locale/es/LC_MESSAGES/samba-configurator.mo
	msgfmt po/fr.po -o locale/fr/LC_MESSAGES/samba-configurator.mo
	msgfmt po/de.po -o locale/de/LC_MESSAGES/samba-configurator.mo

override_dh_auto_clean:
	rm -f locale/*/LC_MESSAGES/*.mo

override_dh_auto_test:
	# Skip tests

override_dh_auto_install:
	# Install Python modules
	install -d debian/samba-configurator/usr/share/samba-configurator
	install -m 644 main.py debian/samba-configurator/usr/share/samba-configurator/
	install -m 644 dialogs.py debian/samba-configurator/usr/share/samba-configurator/
	install -m 644 utils.py debian/samba-configurator/usr/share/samba-configurator/
	install -m 644 shared_elements.py debian/samba-configurator/usr/share/samba-configurator/
	install -m 644 i18n.py debian/samba-configurator/usr/share/samba-configurator/
	
	# Install translations
	install -d debian/samba-configurator/usr/share/samba-configurator/locale/en/LC_MESSAGES
	install -d debian/samba-configurator/usr/share/samba-configurator/locale/it/LC_MESSAGES
	install -d debian/samba-configurator/usr/share/samba-configurator/locale/es/LC_MESSAGES
	install -d debian/samba-configurator/usr/share/samba-configurator/locale/fr/LC_MESSAGES
	install -d debian/samba-configurator/usr/share/samba-configurator/locale/de/LC_MESSAGES
	install -m 644 locale/en/LC_MESSAGES/samba-configurator.mo debian/samba-configurator/usr/share/samba-configurator/locale/en/LC_MESSAGES/
	install -m 644 locale/it/LC_MESSAGES/samba-configurator.mo debian/samba-configurator/usr/share/samba-configurator/locale/it/LC_MESSAGES/
	install -m 644 locale/es/LC_MESSAGES/samba-configurator.mo debian/samba-configurator/usr/share/samba-configurator/locale/es/LC_MESSAGES/
	install -m 644 locale/fr/LC_MESSAGES/samba-configurator.mo debian/samba-configurator/usr/share/samba-configurator/locale/fr/LC_MESSAGES/
	install -m 644 locale/de/LC_MESSAGES/samba-configurator.mo debian/samba-configurator/usr/share/samba-configurator/locale/de/LC_MESSAGES/
	
	# Install executable launcher
	install -d debian/samba-configurator/usr/bin
	install -m 755 samba-configurator.sh debian/samba-configurator/usr/bin/samba-configurator
	
	# Install desktop entry
	install -d debian/samba-configurator/usr/share/applications
	install -m 644 samba-configurator.desktop debian/samba-configurator/usr/share/applications/
	
	# Install icon (multiple resolutions)
	install -d debian/samba-configurator/usr/share/icons/hicolor/16x16/apps
	install -m 644 icons/16x16/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/16x16/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/22x22/apps
	install -m 644 icons/22x22/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/22x22/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/32x32/apps
	install -m 644 icons/32x32/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/32x32/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/48x48/apps
	install -m 644 icons/48x48/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/48x48/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/64x64/apps
	install -m 644 icons/64x64/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/64x64/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/128x128/apps
	install -m 644 icons/128x128/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/128x128/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/256x256/apps
	install -m 644 icons/256x256/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/256x256/apps/samba-configurator.png
	install -d debian/samba-configurator/usr/share/icons/hicolor/512x512/apps
	install -m 644 icons/512x512/samba-configurator.png debian/samba-configurator/usr/share/icons/hicolor/512x512/apps/samba-configurator.png
	
	# Install documentation
	install -d debian/samba-configurator/usr/share/doc/samba-configurator
	install -m 644 README.md debian/samba-configurator/usr/share/doc/samba-configurator/